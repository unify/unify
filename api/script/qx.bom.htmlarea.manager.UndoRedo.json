{"attributes": {"fullName": "qx.bom.htmlarea.manager.UndoRedo", "packageName": "qx.bom.htmlarea.manager", "type": "class", "name": "UndoRedo", "superClass": "qx.core.Object"}, "type": "class", "children": [{"attributes": {"text": "<p>Decorator for CommandManager instance to implement Undo/Redo functionality</p>"}, "type": "desc"}, {"type": "constructor", "children": [{"attributes": {"overriddenFrom": "qx.core.Object", "isCtor": true, "name": "ctor"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "commandManager"}, "type": "param", "children": [{"attributes": {"text": "<p>command manager instance</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "htmlarea.command.Manager"}, "type": "entry"}]}]}, {"attributes": {"name": "editorInstance"}, "type": "param", "children": [{"attributes": {"text": "<p>editor instance</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "qx.ui.embed.HtmlArea"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Constructor</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}]}, {"type": "methods", "children": [{"attributes": {"access": "private", "name": "__addAdditionalContentUndoStep"}, "type": "method", "children": [{"attributes": {"text": "<p>Add additional &#8220;Content&#8221; undo step if the last is no &#8220;Content&#8221; undo step.</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "name": "__addToRedoStack"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "changeInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Infos of the change</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Utility method to add an entry to the redoStack.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__addToUndoStack"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "changeInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Infos of the change</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Utility method to add an entry to the undoStack.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__checkForNextRedoStep"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "command"}, "type": "param", "children": [{"attributes": {"text": "<p>command name</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>command value</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Checks the next redo step with specific conditions</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Whether a next redo step is available</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__checkForNextUndoStep"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "command"}, "type": "param", "children": [{"attributes": {"text": "<p>command name</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>command value</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Checks the next undo step with specific conditions</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Whether a next undo step is available</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__executeExtraRedoStep"}, "type": "method", "children": [{"attributes": {"text": "<p>Sometimes it is necessary to perform two redo steps at once. Helper method.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__executeExtraUndoStep"}, "type": "method", "children": [{"attributes": {"text": "<p>Sometimes it&#8217;s necessary to perform two undo steps. Helper method to\nto keep the stacks in correct state.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__fireUndoRedoStateEvent"}, "type": "method", "children": [{"attributes": {"text": "<p>Fires the &#8220;undoRedoState&#8221; event to inform external components (like a toolbar)\nabout the current state of the undo/redo.\nThe event itself is fired from the HtmlArea instance and with a\ntimeout to not interfere with the current key event.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__getFocusedParagraph"}, "type": "method", "children": [{"attributes": {"text": "<p>Returns the current focused paragraph or null if the no paragraph\nis within the selection.</p>"}, "type": "desc"}, {"attributes": {"defaultValue": "null"}, "type": "return", "children": [{"attributes": {"text": "<p>P element or null</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Element"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__markContentChange"}, "type": "method", "children": [{"attributes": {"text": "<p>A content change which is handled as separate undo step is marked.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__performRedo"}, "type": "method", "children": [{"attributes": {"text": "<p>Wrapper method for redo execCommand to prevent any exceptions bubbling\nup to the user.</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Success of execCommand</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__performUndo"}, "type": "method", "children": [{"attributes": {"text": "<p>Wrapper method for undo execCommand to prevent any exceptions bubbling\nup to the user.</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Success of execCommand</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__populateCommandList"}, "type": "method", "children": [{"attributes": {"text": "<p>Populates the internal command list. This list determines\nwhich commands are handled directly by the undo manager and\nwhich commands are passed through (without added to the undo/redo\nhistory).</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__redoCommand"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "redoInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Redo info object</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Redo a browser-supported command.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__redoContent"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "redoInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Redo info object</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Redo a content manipulation</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__redoCustom"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "redoInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Redo info object</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Redo a custom command.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__redoInternal"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "redoInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Undo info object</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Redo an internal change like resizing an image/add table cell</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Success of command</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__undoCommand"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "undoInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Undo info object</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Undo a browser-supported command.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__undoContent"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "undoInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Undo info object</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Undo content manipulation.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__undoInternal"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "undoInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Undo info object</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Undo an internal change like resizing an image/add table cell</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Success of command</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "name": "__updateUndoStack"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"defaultValue": "String", "name": "changeInfo"}, "type": "param", "children": [{"attributes": {"text": "<p>Infos of the change.\n                                    Either a map containing details or null for change through a command identifier</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Adds the occurred changes to the undo history and\nsets a flag for the redo action.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"access": "protected", "name": "_handleKeyPress"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "e"}, "type": "param", "children": [{"attributes": {"text": "<p>key event instance</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "qx.event.type.Key"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Key press handler for the undo manager. Only acts on specific events which\nare important to the undo manager.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"name": "addUndoStep"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "command"}, "type": "param", "children": [{"attributes": {"text": "<p>Command identifier</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>value of command</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "commandObject"}, "type": "param", "children": [{"attributes": {"text": "<p>Info object about command</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Public <span class=\"caps\">API</span> method to add an undo step</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"name": "execute"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "command"}, "type": "param", "children": [{"attributes": {"text": "<p>Command to execute</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"defaultValue": "null", "name": "value"}, "type": "param", "children": [{"attributes": {"text": "<p>Value of the command (if any)</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String ? Integer"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Executes the given command and collects (if necessary) undo information.</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Result of operation</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"name": "getUndoRedoObject"}, "type": "method", "children": [{"attributes": {"text": "<p>Helper method to get an undo object which is added to the undoStack</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>undo object</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"name": "insertParagraphOnLinebreak"}, "type": "method", "children": [{"attributes": {"text": "<p>Inserts a paragraph when hitting the &#8220;enter&#8221; key.\nDelegates to the real command manager instance.</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>whether the key event should be stopped or not</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"name": "isRedoPossible"}, "type": "method", "children": [{"attributes": {"text": "<p>Service method to check if a redo operation is currently possible</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Whether redo is possible or not</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"name": "isUndoPossible"}, "type": "method", "children": [{"attributes": {"text": "<p>Service method to check if an undo operation is currently possible</p>"}, "type": "desc"}, {"type": "return", "children": [{"attributes": {"text": "<p>Whether an undo is possible or not</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"name": "redo"}, "type": "method", "children": [{"attributes": {"text": "<p>Redo facade method. The different types of redo (command/custom/content)\nare delegated to their specialized implementation.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}, {"attributes": {"name": "registerHandler"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "actionType"}, "type": "param", "children": [{"attributes": {"text": "<p>actionType to react on with undo and redo methods</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "undoHandler"}, "type": "param", "children": [{"attributes": {"text": "<p>undo method</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "function"}, "type": "entry"}]}]}, {"attributes": {"name": "redoHandler"}, "type": "param", "children": [{"attributes": {"text": "<p>redo method</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "function"}, "type": "entry"}]}]}, {"attributes": {"name": "context"}, "type": "param", "children": [{"attributes": {"text": "<p>In this context the methods are called. When no\n              context is given the context is the UndoManager itself.</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Register a handler for a customized actionType. This handler methods\n(undo and redo) are called whenever the UndoManager encounters the\ngiven actionType to undo/redo the change.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"name": "setContentDocument"}, "type": "method", "children": [{"type": "params", "children": [{"attributes": {"name": "doc"}, "type": "param", "children": [{"attributes": {"text": "<p>document node to work on</p>"}, "type": "desc"}, {"type": "types", "children": [{"attributes": {"type": "Document"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Set the document instance on which the UndoManager should perform his actions.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "void"}, "type": "entry"}]}]}]}, {"attributes": {"name": "undo"}, "type": "method", "children": [{"attributes": {"text": "<p>Undo facade method. The different types of undo (command/custom/content)\nare delegated to their specialized implementation.</p>"}, "type": "desc"}, {"type": "return", "children": [{"type": "types", "children": [{"attributes": {"type": "Boolean"}, "type": "entry"}]}]}]}]}]}